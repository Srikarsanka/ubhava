<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <title>Cart - Ubhaava</title>
      <style>
            body {
                  font-family: Arial, sans-serif;
                  padding: 2rem;
                  background-color: #fffaf0;
            }

            h1 {
                  text-align: center;
                  color: #800000;
            }

            .cart-item {
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                  padding: 1rem;
                  border-bottom: 1px solid #ccc;
                  background: #ffffff;
                  border-radius: 1rem;
                  margin: 1rem 0;
            }

            .cart-item img {
                  width: 100px;
                  height: 100px;
                  object-fit: cover;
                  border-radius: 0.5rem;
            }

            .cart-details {
                  flex: 1;
                  margin-left: 1rem;
            }

            .cart-actions {
                  display: flex;
                  align-items: center;
                  gap: 10px;
            }

            .cart-actions button {
                  padding: 5px 10px;
                  font-size: 1rem;
                  background-color: #800000;
                  color: white;
                  border: none;
                  border-radius: 0.3rem;
                  cursor: pointer;
            }

            .remove-btn {
                  background-color: #cc0000;
            }

            .total-section {
                  margin: 2rem 0;
                  padding: 1rem;
                  background-color: #ffe4b5;
                  border-radius: 1rem;
                  font-size: 1.5rem;
                  font-weight: bold;
                  text-align: center;
                  color: #0f346c;
            }
      </style>
</head>

<body>

      <h1>Your Cart</h1>
      <div class="total-section" id="totalCost">
            Total: ₹0
      </div>

      <div id="cartContainer"></div>

      <script>
            let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

            function calculateDiscount(total) {
                  if (total <= 20000) return 0;
                  let extra = total - 20000;
                  let slabs = Math.floor(extra / 5000);
                  let discountPercent = Math.min(5 + slabs * 5, 20);
                  return (total * discountPercent) / 100;
            }

            function updateCartDisplay() {
                  const container = document.getElementById("cartContainer");
                  container.innerHTML = "";

                  let total = 0;

                  cartItems.forEach((item, index) => {
                        const itemTotal = item.price * item.quantity;
                        total += itemTotal;

                        const div = document.createElement("div");
                        div.className = "cart-item";

                        div.innerHTML = `
        <img src="${item.img}" alt="product">
        <div class="cart-details">
          <h3>${item.name}</h3>
          <p>Size: ${item.size}</p>
          <p>Price: ₹${item.price}</p>
          <p>Total: ₹${itemTotal}</p>
        </div>
        <div class="cart-actions">
          <button onclick="decreaseQty(${index})">-</button>
          <span>${item.quantity}</span>
          <button onclick="increaseQty(${index})">+</button>
          <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
        </div>
      `;
                        container.appendChild(div);
                  });

                  const discount = calculateDiscount(total);
                  const finalAmount = total - discount;

                  document.getElementById("totalCost").innerText = `
      Subtotal: ₹${total} | Discount: ₹${discount.toFixed(0)} | Final: ₹${finalAmount.toFixed(0)}
    `;
            }

            function increaseQty(index) {
                  cartItems[index].quantity += 1;
                  saveAndUpdate();
            }

            function decreaseQty(index) {
                  if (cartItems[index].quantity > 1) {
                        cartItems[index].quantity -= 1;
                        saveAndUpdate();
                  }
            }

            function removeItem(index) {
                  cartItems.splice(index, 1);
                  saveAndUpdate();
            }

            function saveAndUpdate() {
                  localStorage.setItem("cartItems", JSON.stringify(cartItems));
                  updateCartDisplay();
            }

            updateCartDisplay();
      </script>

</body>

</html>